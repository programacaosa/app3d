<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skull Renderer</title>
  <style>
    body { margin: 0; overflow: hidden; }
    #container { width: 100vw; height: 100vh; }
  </style>
</head>
<body>
  <div id="container"></div>
  
  <!-- Three.js principal -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
  <!-- Loaders separados -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>

 <script>
  // Cena
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x222222);

  // Luzes (essencial para ver materiais)
  const light = new THREE.DirectionalLight(0xffffff, 1);
  light.position.set(1, 1, 1).normalize();
  scene.add(light);
  scene.add(new THREE.AmbientLight(0x404040));

  // Câmera
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.z = 10;

  // Renderer
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.getElementById('container').appendChild(renderer.domElement);

  // Carregar modelo
  const loader = new THREE.OBJLoader();
  loader.load(
    'cranio.obj',
    function (object) {
      console.log("Modelo carregado:", object); // Debug

      // Aplica um material básico
      object.traverse(function (child) {
        if (child.isMesh) {
          child.material = new THREE.MeshBasicMaterial({ color: 0x00ff00, wireframe: true });
        }
      });

      scene.add(object);

      // Centraliza o modelo
      const bbox = new THREE.Box3().setFromObject(object);
      const center = bbox.getCenter(new THREE.Vector3());
      object.position.sub(center);
      camera.lookAt(center);
    },
    function (xhr) {
      console.log((xhr.loaded / xhr.total * 100) + '% loaded');
    },
    function (error) {
      console.error('Erro ao carregar o modelo:', error);
    }
  );

  // Animação
  function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
  }
  animate();

  // Redimensionamento
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>
</body>
</html>
